"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkzuma_ui"] = self["webpackChunkzuma_ui"] || []).push([["src_pages_Index_js"],{

/***/ "./src/pages/Index.js":
/*!****************************!*\
  !*** ./src/pages/Index.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_Intent_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/Intent.js */ \"./src/lib/Intent.js\");\n/* harmony import */ var _files_bg_png__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../files/bg.png */ \"./src/files/bg.png\");\n/* harmony import */ var _lib_common_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/common.js */ \"./src/lib/common.js\");\n/* harmony import */ var _lib_utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/utils.js */ \"./src/lib/utils.js\");\n\n\n\n//let config = JSON.parse(window.localStorage.getItem(\"clientConfig\"))\n//import config from \"../config.js\";\n\n\n\n\nconst Index = function ({ frame, context, data }) {\n// let messageTracker = {index:0};\n//console.log(context )\n const BOT = [\n  {\n    id:9999999999,\n    title:\"Whats the plan today?\",\n    suggests:[\n      \"Read Docs\",\n      \"Test App\",\n      \"Get CDN\",\n      \"Generate Starter app\",\n      \"See more\",\n      \"Just chilling 😇\",\n      ]\n  },\n  {\n    id:0,\n    title:\"Great choice! A better way of understanding any project is by taking a glance at the documentations. However, the choice is yours.\",\n    suggests:[\n      \"Get Started\",\n      \"APIs\",\n      \"Configuration File\",\n      \"What is Intent?\",\n      \"Quit\",\n      ]\n  },\n  {\n    id:6,\n    title:\"Our app is designed with full customisation in mind. You should started by appending our CDN into your page and see the magic\",\n    suggests:[\"Get CDN\",\"Generate Starter Kit\",\"Return\"]\n  }\n  ]\nconst BOT_SUGGESTS = BOT.map(bot=>bot.suggests).flat(Infinity)\n\n\n  frame.setCss(\"z-2 !bg-white user-select-none\");\n\n  //console.log(context.config)\n  const showcase = frame.nextNode(null, \"div\");\n  showcase.setCss(\n    \"h-full w-full flex flex-col justify-around items-center bg-transparent\"\n  );\n\n  const container = showcase.nextNode(null, \"div\");\n  container.setCss(\n    \"flex flex-col justify-center items-center py-5 w-full h-full flex flex-col justify-between bg-transparent\"\n  );\n\n  const msgArea = container.nextNode();\n  msgArea.setCss(\"max-h-[90%] w-[100%] bg-transparent overflow-y-auto\");\n\n \n /* useMessage({ msgArea, type: \"client\", message: \"Itzfeminisce\" });\n  useMessage({\n    msgArea,\n    message: \"Okay Itzfeminisce, How can i help you today?\",\n  });\n*/\n  const formContainer = container.nextNode();\n  const sgg = formContainer.nextNode();\n  const {\n    form,\n    inputs: [ticket, message],\n    submitButton,\n    onSubmit: handleBeginMessage,\n  } = formContainer.nextForm(\n    \"/api/welcome\",\n    \"get\",\n    [\n      {\n        label: \"\",\n        name: \"ticket\",\n        use: \"button\",\n      },\n      {\n        label: \"\",\n        name: \"message\",\n        placeholder: \"How are you?\",\n      },\n    ],\n    true\n  );\n\n  sgg.setCss(\"bg-transparent py-2\");\n  useMessage({ msgArea, suggestionArea:sgg });\n\n/*\n  useMessage({ msgArea: sgg, message: \"Hello!\", type: \"suggest\" });\n  useMessage({ msgArea: sgg, message: \"That's Awesome!\", type: \"suggest\" });\n  useMessage({ msgArea: sgg, message: \"👏\", type: \"suggest\" });\n*/\n\n  formContainer.setCss(\"sticky bottom-0 mx-auto inset-x-0 bg-transparent\");\n\n  form.setCss(\"flex justify-between items-center bg-transparent\");\n  ticket.inputEl.setCss(\"fa fa-plus p-3 text-slate-500 font-bold rounded-full\");\n  message.inputEl.setCss(\n    \"bg-slate-100 rounded-full border-0 p-3 shadow-sm placeholder:text-black/70 mx-1\"\n  );\n  submitButton.textContent = \"\";\n  submitButton.setCss(\n    \"fa fa-paper-plane !bg-blue-500 text-white rounded-full p-3\"\n  );\n\n  ticket.inputEl.addEventListener(\"click\", handlePickAttachment);\n\n// The furst time submitting a message\nhandleBeginMessage((data,e) => {\n    //useMessage({ msgArea, message: data.get(\"message\"), type: \"client\" });\n   handleMessage(data)\n   e.target.reset()\n   // e.target.form.reset()\n   sgg.nextNode(`${context?.config.appName} is typing...`).setCss(\"!bg-transparent font-small text-green-500 m-px\")\n setTimeout(()=>{\n   getSuggestedMessageAndResponses(BOT,9999999999,msgArea,sgg,useMessage)\n }\n    ,2500)\n   });\n   \n   \n  function handleMessage(data) {\n    //console.log(data.get(\"message\"))\n    const message = data.get(\"message\")\n  //const suggestIndex = data.get(\"suggestIndex\")\n  /*  setTimeout(() => {\n      useMessage({ msgArea, message: \"Working on it...\", type: \"bot\" });\n    }, 2500);\n    */\n    sgg.clearChildren()\n    \n    if(message.startsWith(\"data:\")){\n     const img = (0,_lib_common_js__WEBPACK_IMPORTED_MODULE_2__.createNode)(\"img\",{\n       attributes:{\n         src:message,\n         width:200,\n         height:200,\n         alt:\"attachment\",\n       }\n     })\n     img.setCss(\"mb-5\")\n    msgArea.appendChild(img)\n     img.scrollIntoView()\n    setTimeout(()=>useMessage({ msgArea, message:\"Working on it...\", type: \"bot\"}),2500);\n    return;\n    }\n    useMessage({ msgArea, message, type: \"client\"});\n  //  msgArea.scrollIntoView()\n  }\n  \n  function handlePickAttachment() {\n    const file = (0,_lib_common_js__WEBPACK_IMPORTED_MODULE_2__.createNode)(\"input\", {\n      attributes: [{\n        key: \"type\",\n        value: \"file\",\n      },{\n        key:\"name\",\n        value:\"attachment\",\n      }],\n    });\n    file.click();\n    file.addEventListener(\"change\", (e) => {\n      const fr = new FileReader()\n      fr.readAsDataURL(e.target.files[0])\n     const map = new Map()\n     fr.onload = ()=>{\n       map.set(\"message\",fr.result)\n   handleMessage(map)\n     }\n    });\n  }\nfunction getSuggestedMessageAndResponses(bot,suggestIndex,msgArea, suggestionArea, useMessage){\n    //setTimeout(() => {\n      const message = bot.filter(b=>b.id === suggestIndex).at(0)\n      \n       useMessage({ msgArea,message:message.title, type: \"bot\" });\n       \n       sgg.clearChildren()\n       message.suggests.forEach((s)=>{\n      //console.log(s,i++)\n       useMessage({ msgArea:suggestionArea, message: s, type: \"suggest\"});\n       })\n       //bot.nextMessageIndex++\n      //messageTracker.index++;\n  //  }, 2500);\n}\n \n  function useMessage({\n    message = `Hi <b>${data.get(\"fullname\").ucfirst()}</b>! My name is ${context?.config.appName}. What's up with you?`,\n    type = \"bot\",\n    msgArea,\n   suggestionArea = null\n  }) {\n    let l, r, cl, cr;\n    const classes = {\n      bot: \"!bg-slate-500 text-shadow-black/40 py-1 px-2 text-white rounded-lg text-base/7 inline-block\",\n      client:\n        \"!bg-blue-700 text-base/7 py-1 px-2 text-white rounded-lg inline-block self-right\",\n      suggest:\n        \"bg-white py-1 px-2 text-black rounded-lg text-smaller m-1 inline-block shadow-lg border-slate-300\",\n    };\n\n    switch (type) {\n      case \"bot\":\n        // Bot\n        l = msgArea.nextNode();\n        l.setCss(\"bg-transparent mb-5\");\n        cl = l.nextNode(message, \"p\");\n        cl.setCss(classes.bot);\n        (suggestionArea && suggestionArea.nextNode(\"I will address you by this name.\",\"span\").setCss(\"text-center block bg-transparent text-blue-600 p-1 text-sm\"))\n       // const map = new Map()\n       // map.set(\"message\",\"bot is aking for name\")\n       // map.set(\"givenName\",\"\")\n       // handleMessage(map)\n        l.scrollIntoView();\n        break;\n      case \"client\":\n        // client\n        r = msgArea.nextNode();\n        r.setCss(\"bg-transparent mb-5 flex\");\n        cr = r.nextNode(message, \"p\");\n        cr.setCss(classes.client);\n  sgg.clearChildren()\nsetTimeout(()=>{\n  getSuggestedMessageAndResponses(BOT,BOT_SUGGESTS.indexOf(message),msgArea,sgg,useMessage)\n    r.scrollIntoView();\n},2500)\n        break;\n      case \"suggest\":\n        // client\n        r = msgArea.nextNode(message, \"span\");\n        r.setCss(classes.suggest);\n//sgg.clearChildren()\n     //   r.scrollIntoView();\n        r.addEventListener(\"click\", function (e) {\n          const m = new Map();\n          m.set(\"message\", message);\n        //  sgg.clearChildren()\n\n       //   if(suggestIndex) m.set(\"suggestIndex\",suggestIndex)\n          handleMessage(m, e);\n          r.scrollIntoView()\n        });\n        break;\n    }\n  }\n\n  context.removeFooter();\n  return showcase;\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Index);\n\n\n//# sourceURL=webpack://zuma-ui/./src/pages/Index.js?");

/***/ }),

/***/ "./src/files/bg.png":
/*!**************************!*\
  !*** ./src/files/bg.png ***!
  \**************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("module.exports = __webpack_require__.p + \"4f6df144adbea81a4074.png\";\n\n//# sourceURL=webpack://zuma-ui/./src/files/bg.png?");

/***/ })

}]);